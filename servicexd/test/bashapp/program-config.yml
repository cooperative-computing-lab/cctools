services:
  reserve_port:
    type: "action"
    command: "python reserve_ports.py 4 ports.config"
    log_file: "reserve_ports.log"
    error_file: "reserve_ports_error.log"

  program1:
    type: "action"
    command: "./program1.sh"
    log_file: "program1.log"
    error_file: "program1_error.log"
    state:
      log:
        ready: "program is ready"
        complete: "program is completed"
    dependency:
      items:
        program2: "ready"

  program2:
    type: "service"
    command: "./program2.sh"
    log_file: "program2.log"
    error_file: "program2_error.log"
    state:
      log:
        ready: "program is ready"
        complete: "program is completed"
    dependency:
      mode: "all"
      items:
        reserve_port: "final"
        program3: "final"

  program3:
    type: "service"
    command: "./program3.sh"
    log_file: "program3.log"
    error_file: "program3_error.log"
    state:
      log:
        ready: "program is ready"
        complete: "program is completed"
    dependency:
      items:
        reserve_port: "final"

output:
  state_times: "state_times.json"
stop_signal: "/tmp/bashapp/stop"
max_run_time: 120
