#!/usr/bin/env bash

# This script uses MESOS_SOURCE_DIR and MESOS_BUILD_DIR which come
# from configuration substitutions.
MESOS_SOURCE_DIR=/afs/nd.edu/user37/ccl/software/external/mesos-0.26.0/src/mesos-0.26.0_build
MESOS_BUILD_DIR=/afs/nd.edu/user37/ccl/software/external/mesos-0.26.0/src/mesos-0.26.0_build/build

# Use colors for errors.
. ${MESOS_SOURCE_DIR}/support/colors.sh

# Force the use of the Python interpreter configured during building.
test ! -z "${PYTHON}" && \
  echo "${RED}Ignoring PYTHON environment variable (using @PYTHON@)${NORMAL}"

PYTHON=/usr/bin/python

SCRIPT=${CCTOOLS}/bin/mf_mesos_executor.py

LD_PRELOAD="/afs/nd.edu/user37/ccl/software/external/gcc-4.9.3/amd64_linux26/lib64/libstdc++.so.6:/afs/nd.edu/user37/ccl/software/external/svn-1.9.4/amd64_linux26/lib/libsvn_delta-1.so" \
exec ${PYTHON} ${SCRIPT} "${@}"
