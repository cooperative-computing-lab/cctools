
# Within galaxy-dist
cd tool-data/shared/
# Get recent cctools distribution:  
wget https://github.com/cooperative-computing-lab/cctools/archive/master.zip
unzip master.zip
mkdir cctools
mv cctools-*/* cctools-*/.[^.]* cctools
cd cctools
./configure --prefix $PWD
make install
# Verify that no errors occurred.
# Move to galaxy_dist directory
cd ../../..
cp ./tool-data/shared/cctools/galaxy/cctools.py ./lib/galaxy/datatypes/

perl ./tool-data/shared/cctools/galaxy/modify_registry.pl ./lib/galaxy/datatypes/registry.py
mv tmp_registry ./lib/galaxy/datatypes/registry.py

mkdir tools/ndBioapps
cp ./tool-data/shared/cctools/galaxy/makeflow* ./tools/ndBioapps

perl ./tool-data/shared/cctools/galaxy/modify_tool_conf.pl ./config/tool_conf.xml.sample
mv tmp_tool_conf ./config/tool_conf.xml.sample

echo "galaxy_pass" > tool-data/mypwfile


# Get GATK from https://www.broadinstitute.org/gatk/download
# Move to tool-data/shared/jars/gatk/GenomeAnalysisTK.jar

# INSTALL Picard
cd tool-data/shared
wget https://github.com/broadinstitute/picard/zipball/master
unzip master
mkdir picard
mv broadinstitute-picard-*/* broadinstitute-picard-*/.[^.]* picard
cd picard
git clone https://github.com/samtools/htsjdk.git
ant
# Clean
cd ..
rm master
rmdir broadinstitute-picard-*/
cd ../..

#INSTALL samtools
cd tool-data/shared
wget http://sourceforge.net/projects/samtools/files/latest/download 
tar jxf download
mkdir samtools
mv samtools-*/* samtools
cd samtools
make
cd ..
rm download
rmdir samtools-*/
cd ../..

# INSTALL VCFTools
cd tool-data/shared
wget http://sourceforge.net/projects/vcftools/files/latest/download
tar zxf download
mkdir vcftools
mv vcftools_*/* vcftools
cd vcftools
make
# Should be added to path at startup
export PERL5LIB=$PWD/perl/
cd ..
rm download
rmdir vcftools_*/
cd ../..

# INSTALL Java 1.7
cd tool-data/shared
mkdir java
cd java
wget http://javadl.sun.com/webapps/download/AutoDL?BundleId=97800
tar zxf AutoDL*
mkdir jre 
mv jre1*/* jre
rmdir jre1*
zip -r jre.zip jre/*
cd ../../..
